/*! dxui by dxkite 2016-12-07 */
"use strict";var dxui=dxui||{version:"1.0.0"};!function(a){var b=function(a,c){return new b.constructor(a,c)};b.constructor=function(a,b){"string"==typeof a?this.elements=(b||document).querySelectorAll(a):this.elements=[a],this.context=b,this.length=this.elements.length;for(var c=0;c<this.length;c++)this[c]=this.elements[c];return this},b.extend=function(a){for(var b in a)this[b]=a[b]},b.extend({element:function(a,c,d){var e=document.createElement(a);return b(e).attr(c).css(d),e}}),b.constructor.prototype={attr:function(a){return this.each(function(){if(a)for(var b in a)this.setAttribute(b,a[b])}),this},css:function(b){return this.each(function(){if(b)for(var c in b)this.style[a.cssfix(c)]=b[c]}),this},addClass:function(a){return this.each(function(){this.class+=" "+a}),this},removeClass:function(a){return this.each(function(){var b=new RegExp("/\\s+?"+a+"/");this.class.replace(b,"")}),this},each:function(a){for(var b=0;b<this.length;b++)a.call(this[b],this[b],b);return this},on:function(a,b,c){return this.each(function(){this.addEventListener(a,b,c)}),this}},b.method=b.constructor.prototype,b.method.extend=function(a){for(var b in a)this[b]=a[b]},a.dom=b}(dxui),function(a){function b(b){return b=b.trim(),b="undefined"==typeof document.documentElement.style[b]?a.css_perfix+b:b}a.is_function=function(a){return"[object Function]"===Object.prototype.toString.call(a)},a.is_array=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.is_object=function(a){return"[object Object]"===Object.prototype.toString.call(a)},a.is_string=function(a){return"string"==typeof a},a.get_root_path=function(){var a=document.getElementsByTagName("script"),b=a[a.length-1].getAttribute("src");return b.substring(0,b.lastIndexOf("/"))},a.dipatch_event=function(a,b,c,d,e){var f=document.createEvent(str_cache[0]),g=void 0===typeof d||d,h=void 0===typeof e||e;return f.initCustomEvent(b,g,h,c),a.dispatchEvent(f),a["on"+b]&&is_function(a["on"+b])&&a["on"+b].call(a,f),f},a.object_copy=function(a){for(var b={},c=0;c<arguments.length;c++)for(var d in arguments[c])b[d]=arguments[c][d];return b},a.get_css_perfix=function(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms|)-/)||""===a.OLink&&["","o"])[1];return"-"+b+"-"},a.css_perfix=a.get_css_perfix(),a.cssname=function(a){return a=b(a),a=a.replace(/[A-Z]/,function(a){return"-"+a.toLowerCase()})},a.cssfix=b,window.dxui=a}(dxui),function(a){a.moveable=function(a,b){var c=b||a,d=a;d.style.position="fixed";var e=function(a){a.preventDefault();var b="mousemove",e="mouseup";a.touches&&(a=a.touches[0],b="touchmove",e="touchend");var f=c.getBoundingClientRect(),g=a.clientX-f.left,h=a.clientY-f.top,i=document;d.setCapture?d.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);var j=function(a){a.touches&&(a=a.touches[0]);var b=a.pageX||a.clientX+document.body.scrollLeft-document.body.clientLeft,c=a.pageY||a.clientY+document.body.scrollTop-document.body.clientTop,e=b-g,f=c-h;d.style.left=e+"px",d.style.top=f+"px"},k=function(a){d.releaseCapture?d.releaseCapture():window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP),i.removeEventListener(b,j),i.removeEventListener(e,k)};i.addEventListener(b,j),i.addEventListener(e,k)};return c.addEventListener("mousedown",e),c.addEventListener("touchstart",e),d}}(dxui),function(a){function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}var d={},e={cache:!0,tags:["{","}"],compress:!0,use_strict:!0},f="if,else,each,include,while,for",g="^\\s*((?:/)?(?:"+f.split(",").join("|")+"))(.*)",h=e.tags[0],i=e.tags[1],j=e.cache,k=e.compress,l=e.use_strict;d.config=function(a){j=void 0!==typeof a.cache?a.cache:e.cache,k=void 0!==typeof a.compress?a.compress:e.compress,a.tags&&2===a.tags.length&&(h=a.tags[0],i=a.tags[1])};var m="".trim,n=m?["$_tpl_=''","$_tpl_+=",";","$_tpl_"]:["$_tpl_=[]","$_tpl_.push(",");","$_tpl_.join('')"],o={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},p=function(a,c){try{new Function(a)}catch(a){return"throw "+a.name+"("+b(a.message)+");{"}return c},q={html:function(a){var c="";return a.match(/(?!^)\n/)?u(a.split("\n"),function(a){a&&(k&&(a=a.replace(/\s+/g," ").replace(/<!--.*?-->/g,"")),a&&(c+=n[1]+b(a)+n[2],c+="\n"))}):a&&(c+=n[1]+b(a)+n[2]),c},code:function(a){var b;if(!(b=a.match(new RegExp(g))))return(b=a.match(/^!.*$/))?n[1]+"$_unit._echo("+b[1]+")"+n[2]:n[1]+"$_unit._escape("+a+")"+n[2];var c=b[1],d=b[2];switch(c){case"include":return d=d.trim().split(" "),1===d.length&&d.push("$_unit.value"),d=d.join(","),n[1]+"$_unit._include("+d+")"+n[2];case"if":return p("if("+d+"){}","if ("+d+") {");case"else":return(b=d.match(/^\s*if\s+(.*)/))?"} else if ("+b[1]+"){":"}else{";case"/if":case"/while":case"/for":return"}";case"while":return p("while("+d+"){}","while ("+d+") {");case"for":return p("for("+d+"){}","for ("+d+") {");case"each":var b=d.match(/(\w+)\s+(?:(?:as(?:\s+(\w+)))?(?:(?:\s+=>)?\s+(\w+))?)?/);if(b){var e,f=b[1];return e=b[2]?b[3]?b[3]+","+b[2]:b[2]:"value,index","$_unit._each("+f+",function("+e+"){"}return'throw SyntaxError("Null Each Value");$_unit._each(null,function(){';case"/each":return"});"}}},r=function(a){return o[a]},s=function(a){return new String(a)},t=function(a){return s(a).replace(/&(?![\w#]+;)|[<>"']/g,r)},u=function(a,b){if(c(a))v(a,b);else for(var d in a)b.call(a[d],a[d],d)},v=function(a,b){for(var c=0;c<a.length;++c)b.call(a[c],a[c],c)},w=function(a,b){if(!document.getElementById(a))throw Error("No Template "+a);try{var c=new D(a,b);return c instanceof String?c:"[Error Template "+a+"]"}catch(a){throw a}},x=function(a,b,c,d){var a=a||"anonymous",e="DxTPL Error:";if(console.group(e),b){var f=b.replace(/^\n/,"").split("\n"),g=c-5>0?c-5:1,h=c+5>f.length?f.length:c+5;console.error(d);for(var i=g;i<h;i++)i==c?console.log(i+"|%c"+f[c-1]+"\t\t%c->\t\t%c"+d.name+":"+d.message,"color:red;","color:green;","color:red;"):console.log(i+"|"+f[i-1])}else console.log(b),console.log("%c"+e+d.message+"\t\t@"+a+":"+c,"color:red;");console.groupEnd(e)},y=function(a,b){var c="";return a=a.replace(/^\n/,""),u(a.split(h),function(a,d){var e=a.split(i);1===e.length?c+=b.html(e[0]):(c+=b.code(e[0]),c+=b.html(e[1]))}),c},z=function(a,b){var c=[];c.push("var $_unit=this,"+n[0]);for(var d in b)c.push(d+"=this.value."+d);var e="";return l&&(e='"use strict";'),e+=c.join(","),e+=";",e+=a+"return new String("+n[3]+");"},A=function(a,b,c,d){var e,f=z(c,d),g={_each:u,_echo:s,_escape:t,_include:w,value:d};try{var h=new Function(f);e=h.call(g)}catch(c){var i=new String(c.stack).match(/<anonymous>:(\d+):\d+/);if(i){var j=i[1]-1;x(a,b,j,c)}else{var a=a||"anonymous",i=new String(c.stack).match(/Function code:(\d+):\d+/);i?console.error("DxTPL:Compile Error@"+a+" Line "+i[1]):console.error("DxTPL:Compile Error@"+a)}}return e},B=function(a){var b=document.getElementById("template_caches");b||(b=document.createElement("div"),b.id="template_caches",b.style.display="none",document.body.appendChild(b));var c="template_cache_"+a,d=document.getElementById("template_cache_"+a);return d||(d=document.createElement("div"),d.id=c,d.innerText=y(document.getElementById(a).innerHTML,q),b.appendChild(d)),d.innerText},C=function(b,c){var d=document.querySelectorAll(b);v(d,function(d,e){var f,g=d.innerHTML;if(d.dataset.tplInit)try{var h=new Function("return "+d.dataset.tplInit+";");f=h()}catch(a){x(b+"["+e+"]",null,0,new Error("Unsupport json"))}f=a.object_copy(f,c);var i=y(g,q);d.innerHTML=A(b,g,i,f)})},D=function(a,b){if("string"!=typeof a)throw Error("Unsupport Template ID");var c,e=document.getElementById(a),f=e.innerHTML;return c=j?B(a):y(f,q),b?A(a,f,c,b):{config:d.config,display:function(b){return A(a,f,c,b)}}};d.compile=function(a){return{display:function(b){return A(null,a,y(a,q),b)}}},d.template=D,d.selftpl=C,window.dxtpl=d}(dxui),function(a){var b=a.dom,c=function(a){this.m_node=a;var c=this;this.buildRichUI(),b(this.m_content).on("blur",function(){c.m_selection=window.getSelection(),c.setRange(c.m_selection.getRangeAt(0))})};c.prototype={getRange:function(){if(this.m_range)return this.m_range;var a=document.createRange(),c=null;return this.m_content.firstChild?c=this.m_content.firstChild:(c=b.element("p"),this.m_content.appendChild(c)),a.selectNode(c),a},setRange:function(a){this.m_range=a.cloneRange()},insertNode:function(a){var b=this.getRange();b.insertNode(a)},buildRichUI:function(){var a=this;this.m_controls=b.element("div",{class:"editor-controls"}),this.m_content=b.element("div",{contenteditable:"true",class:"editor-content"}),this.m_node.appendChild(this.m_controls),this.m_node.appendChild(this.m_content);var c=b.element("a",{href:"#"},{cursor:"pointer"});c.innerHTML="Html",this.m_controls.appendChild(c),b(c).on("click",function(){var c=prompt("url:"),d=b.element("div");d.innerHTML=c,a.insertNode(d)})}},a.Editor=c}(dxui),function(a){var b="Toast-Parent",c="Toast-Show",d="toast",e=1e4,f=function(a,b){return new f.create(a,b)};f.Queue=new Array,f.create=function(a,c){f.Parent=document.getElementById(b),f.Parent||(f.Parent=document.createElement("div"),f.Parent.id=b,document.body.appendChild(f.Parent)),f.Queue.push({message:a,timeout:c})},f.create.prototype.show=function b(){if(!document.getElementById(c)){var g=f.Queue.shift(),h=a.dom.element("div",{id:c,class:d});h.innerHTML=g.message,f.Parent.appendChild(h);var i=window.innerWidth/2-h.scrollWidth/2,j=window.innerHeight-2*h.scrollHeight;h.style.marginLeft=i+"px",h.style.top=j+"px";var k=g.timeout||2e3,l=function(){a.dom(h).css({transition:"opacity 0.3s ease-out",opacity:0}),setTimeout(function(){f.Parent.removeChild(h),f.Queue.length&&b()},300)};a.dom(h).css({position:"fixed",opacity:1,"z-index":e,transition:"opacity 0.1s ease-in"}),setTimeout(l,k)}},f.show=f.create.prototype.show,a.Toast=f}(dxui),function(a){function b(a,b){}a.video_player=function(a,c){return new b(a,c)},a.VideoPlayer=b}(dxui);