/*! snow-editor by dxkite 2018-10-10 */
!function r(a,u,l){function c(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,r,a,u,l)}return u[t].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";var o=y(e("./snow/editor/config")),i=y(e("./snow/editor/SnowEditor")),r=y(e("./snow/editor/component/style/Bold")),a=y(e("./snow/editor/component/style/Italic")),u=y(e("./snow/editor/component/style/Underline")),l=y(e("./snow/editor/component/command/Redo")),c=y(e("./snow/editor/component/command/Undo")),s=y(e("./snow/editor/component/layout/Right")),f=y(e("./snow/editor/component/layout/Left")),d=y(e("./snow/editor/component/layout/Center")),h=y(e("./snow/editor/component/tool/Emotion")),p=y(e("./snow/editor/component/tool/AttachmentManager"));function y(e){return e&&e.__esModule?e:{default:e}}window.SnowEditor=i.default,i.default.applyDefaultConfig(o.default),i.default.registerComponent(r.default),i.default.registerComponent(a.default),i.default.registerComponent(u.default),i.default.registerComponent(s.default),i.default.registerComponent(d.default),i.default.registerComponent(f.default),i.default.registerComponent(c.default),i.default.registerComponent(l.default),i.default.registerComponent(h.default),i.default.registerComponent(p.default)},{"./snow/editor/SnowEditor":4,"./snow/editor/component/command/Redo":8,"./snow/editor/component/command/Undo":9,"./snow/editor/component/layout/Center":10,"./snow/editor/component/layout/Left":11,"./snow/editor/component/layout/Right":12,"./snow/editor/component/style/Bold":13,"./snow/editor/component/style/Italic":14,"./snow/editor/component/style/Underline":15,"./snow/editor/component/tool/AttachmentManager":16,"./snow/editor/component/tool/Emotion":17,"./snow/editor/config":23}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={popLayerLevel:9e3,toastLayerLevel:1e4}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=i(e("../util/isArray")),o=i(e("../util/fixCssPrefix"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function e(t,n){return new e.constructor(t,n)};function r(e,t,n,o){var i=void 0!==o&&o;"addEventListener"in window?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}c.constructor=function(e,t){if("string"==typeof e)this.elements=(t||document).querySelectorAll(e);else{if(e instanceof c)return e;this.elements=[e]}this.context=t,this.length=this.elements.length;for(var n=0;n<this.length;n++)this[n]=this.elements[n];return this},c.extend=function(e){for(var t in e)this[t]=e[t]},c.extend({element:function(e,t,n,o){var i,r,a=-1===e.indexOf("<")?document.createElement(e):(i=e,(r=document.createElement("div")).innerHTML=i,r.firstChild);if(c(a).attr(t).css(n),(0,l.default)(o))for(var u in o)a.appendChild(o[u]);else o instanceof Element?a.appendChild(o):void 0!==o&&(a.innerHTML=o);return a}}),(c.method=c.constructor.prototype).extend=c.extend,c.method.extend({attr:function(n){return this.each(function(){if(n)for(var e in n)if(/^on/.test(e)){var t=e.replace(/^on(.+)$/,"$1");/[A-Z]/.test(t[0])&&(t=t[0].toLowerCase()+t.substr(1)),r(this,t,n[e])}else this.setAttribute(e,n[e])}),this},css:function(t){return this.each(function(){if(t)for(var e in t)this.style[(0,o.default)(e)]=t[e]}),this},addClass:function(t){return this.each(function(){var e=this.getAttribute("class");e?this.setAttribute("class",e+" "+t):this.setAttribute("class",t)}),this},removeClass:function(t){return this.each(function(){var e=this.getAttribute("class").split(/\s+/).filter(function(e){return e!==t});this.setAttribute("class",e.join(" "))}),this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],this[t],t);return this},on:function(e,t,n){var o=this;return e.split(/\s+/).forEach(function(e){o.each(function(){r(this,e,t,n)})}),this},off:function(e,a,u){var t=this;return e.split(/\s+/).forEach(function(r){t.each(function(){var e,t,n,o,i;e=this,t=r,n=a,i=void 0!==(o=u)&&o,"removeEventListener"in window?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n)})}),this}}),n.default=c},{"../util/fixCssPrefix":26,"../util/isArray":32}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=i(e("../dom/DomElement")),a=i(e("../util/printf")),u=i(e("../toast/Toast"));function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("./config")).default,c=new Array,s=0,f=r.default.element;function d(){this.fire("stateChange"),this.components&&this.components.forEach(function(e){e.onStatusChange.call(e)})}var h={insertHTML:function(e){this.range?document.execCommand("insertHTML",null,e):this.alert("no range can insert")}};var p=function(){function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.config=Object.assign(e,l),this.$element=document.querySelector(e.target),this.listener={},this._foucs=!1,this.id=s++,this.$=r.default,this.attachment=new Array,n=(t=this).$element,t.$toolbar=f("div",{class:"snow-toolbar"}),t.$content=f("div",{class:"snow-content",contenteditable:t.config.editable||!0,onfocus:function(){t._foucs=!0,d.call(t),t.fire("focus")},onclick:function(){t._foucs=!0,d.call(t),t.fire("click")},onkeyup:function(){t.fire("contentChange",t.content,t.range)},onblur:function(){t._foucs=!1,d.call(t),t.fire("blur")}},{"min-height":t.config.height},n.innerHTML),n.innerText="",n.appendChild(t.$toolbar),n.appendChild(t.$content),function(o){if(o.components=new Map,o.config.toolbar){var i=o.config.toolbar;c.forEach(function(e){var t=new e(o);if(function(e,t){for(var n in t)if(t[n]==e)return!0;return!1}(t.name,i)){var n=f("div",{class:"snow-tool-item",name:t.name,onclick:function(e){t.onClick.call(t,e,this)}},{},t.view);t.node=n,t.init.call(t,n),o.components.set(t.name,t)}}),i.forEach(function(e){var t=o.components.get(e);o.$toolbar.appendChild(t.node)})}}(this)}return o(i,[{key:"on",value:function(e,t){var n=this.listener[e]||new Array;n.push(t),this.listener[e]=n}},{key:"off",value:function(e,t){if(this.listener[e])for(var n in this.listener[e])this.listener[e][n]===t&&this.listener[e].splice(n,2,this.listener[e][n+1])}},{key:"fire",value:function(e){for(var t=this,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.listener[e]&&this.listener[e].forEach(function(e){e.apply(t,o)})}},{key:"exec",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];(function(e,t){h[e]?h[e].apply(this,t):document.execCommand(e,null,t[0])}).call(this,e,n)}},{key:"alert",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];(0,u.default)(i._.apply(i,[e].concat(n)))}},{key:"name",get:function(){return this.config.target}},{key:"content",get:function(){return this.$content.innerHTML},set:function(e){this.$content.innerHTML=e}},{key:"selectionText",get:function(){var e=this.range;return e?e.toString():null}},{key:"selectionElement",get:function(){var e=this.range;return e?e.commonAncestorContainer:null}},{key:"selectionIsEmpty",get:function(){var e=this.range;return!(!e||!e.startContainer||e.startContainer!==e.endContainer||e.startOffset!==e.endOffset)}},{key:"range",get:function(){var e=window.getSelection();if(0<e.rangeCount)return e.getRangeAt(0)},set:function(e){if(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}},{key:"editable",set:function(e){this.$content.setAttribute("contenteditable",e)},get:function(){return"true"==this.$content.getAttribute("contenteditable")}}],[{key:"applyDefaultConfig",value:function(e){l=e}},{key:"registerComponent",value:function(e){c.push(e)}},{key:"_",value:function(e){for(var t=(l.language&&l.language.str||[])[l.language&&l.language.local||"zh-CN"]||e,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return a.default.apply(void 0,[t].concat(o))}}]),i}();n.default=p},{"../dom/DomElement":3,"../toast/Toast":25,"../util/printf":36,"./config":23}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=t,this.file=e,this.data=null}return o(n,[{key:"isImage",value:function(){return/^image\//.test(this.file.type)}},{key:"upload",value:function(){}},{key:"lcoal",get:function(){return this.data.lcoal||!0}},{key:"html",get:function(){var e=this.data;return this.isImage?'<img title="'+e.name+'" alt="'+e.name+'" src="'+e.link+'">':'<a title="'+e.name+'" herf="'+e.link+'">'+e.name+"</a>"}}]),n}();n.default=i},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e}return o(t,[{key:"init",value:function(e){}},{key:"onClick",value:function(e){}},{key:"onStatusChange",value:function(){}},{key:"name",get:function(){return"Component"}},{key:"view",get:function(){return'<div title="Component">Component</div>'}},{key:"node",set:function(e){this.$element=e},get:function(){return this.$element}}]),t}();n.default=i},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("./Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"name",get:function(){return"RangeComponent"}}]),i(t,[{key:"onRangeAction",value:function(e){console.log(e)}},{key:"onClick",value:function(e){if(this.editor.range){var t=this.onRangeAction(this.editor.range,e)||this.editor.range;this.editor.range=t}}}]),t}();n.default=u},{"./Component":6}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onClick",value:function(e){this.editor.exec("redo")}},{key:"name",get:function(){return"redo"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Component":6}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onClick",value:function(e){this.editor.exec("undo")}},{key:"name",get:function(){return"undo"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Component":6}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifycenter")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifycenter")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-center"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifyleft")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifyleft")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-left"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifyright")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifyright")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-right"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("bold")}},{key:"onStatusChange",value:function(){document.queryCommandState("bold")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"bold"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("italic")}},{key:"onStatusChange",value:function(){document.queryCommandState("italic")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"italic"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("underline")}},{key:"onStatusChange",value:function(){document.queryCommandState("underline")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"underline"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=h(e("../Component")),r=h(e("../../../poplayer/PopLayer")),a=h(e("../../../dom/DomElement")),u=h(e("../../../util/getDropFiles")),l=h(e("../../../util/getPasteFiles")),c=(h(e("../../../util/isChildOf")),h(e("../Attahment"))),s=h(e("./uploader")),f=h(e("../../../util/getSize")),d=h(e("../../../editor/SnowEditor"));function h(e){return e&&e.__esModule?e:{default:e}}var p=a.default.element,y=d.default._;function m(t,n){(0,s.default)(t,n.file).then(function(e){n.data=e,t.exec("insertHTML",n.html),t.attachment.push(n)})}function v(){g.call(this);var t=this,e=(0,f.default)(this.$content),n=p("div",{id:"snow-"+this.id+"-drop",ondrop:function(e){e.preventDefault(),t.dropEnter=!1,g.call(t),function(e){for(var t=(0,u.default)(e),n=new Array,o=0;o<t.length;o++){var i=t[o],r=new c.default(i,i.name);n.push(r)}return n}(e).forEach(function(e){m(t,e)})}},{position:"fixed",backgroundColor:"rgba(0,0,0,0.3)",textAlign:"center",lineHeight:e.height+"px",top:e.top+"px",left:e.left+"px",height:e.height+"px",width:e.width+"px",color:"#fff",fointSize:"2em"},y("拖入文件"));this.$content.parentNode.appendChild(n),this.dropElement=n,window.getSelection().removeAllRanges(),t.range=null}function g(){this.dropElement&&(this.$content.parentNode.removeChild(this.dropElement),this.dropElement=null)}function w(t){var n=this,e=t.attachment,o=new Array;return e.forEach(function(e){o.push(function(e,t){var n=this.layer;return p("div",{title:t.name,class:"snow-attachment-item",onclick:function(){console.log(e.range),e.exec("insertHTML",t.html),n.hide()}},null,[p("i",{class:"iconfont snow-icon-"+(t.isImage?"image":"attachment")}),p("span",null,null,t.name)])}.call(n,t,e))}),a.default.element("div",{class:"snow-attachment-menu"},null,o.length<=0?'<div class="snow-attachment-item">'+y("没有附件")+"</div>":o)}var b=function(e){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return t.dropEnter=!1,(0,a.default)(t.$content).on("paste",function(e){console.log(e.clipboardData.items,e.clipboardData.files),function(e){for(var t=(0,l.default)(e),n=new Array,o=0;o<t.length;o++){var i=t[o];if(/^image\//.test(i.type)){var r=new c.default(i,i.name);n.push(r)}}return n}(e).forEach(function(e){m(t,e)})}),(0,a.default)(window).on("dragenter",function(e){e.preventDefault(),!1===t.dropEnter&&(v.call(t),t.dropEnter=!0)}),(0,a.default)(window).on("drop",function(e){e.preventDefault(),g.call(t)}),(0,a.default)(window).on("dragover",function(e){e.preventDefault(),!(e.dataTransfer.dropEffect="copy")===t.dropEnter&&(v.call(t),t.dropEnter=!0)}),(0,a.default)(window).on("dragleave",function(e){e.preventDefault(),0===e.screenX&&0===e.screenY&&(g.call(t),t.dropEnter=!1)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),o(n,[{key:"init",value:function(e){this.layer=new r.default(w.call(this,this.editor),e)}},{key:"onStatusChange",value:function(){}},{key:"onClick",value:function(e){this.layer.content=w.call(this,this.editor),this.layer.show()}},{key:"name",get:function(){return"attachment"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),n}();n.default=b},{"../../../dom/DomElement":3,"../../../editor/SnowEditor":4,"../../../poplayer/PopLayer":24,"../../../util/getDropFiles":27,"../../../util/getPasteFiles":28,"../../../util/getSize":30,"../../../util/isChildOf":33,"../Attahment":5,"../Component":6,"./uploader":20}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../Component")),r=l(e("../../../poplayer/PopLayer")),a=l(e("../../../dom/DomElement")),u=l(e("./emotion/Text"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"init",value:function(e){var n=new Array,o=this;this.editor.config.emotions.forEach(function(e){var t=null;"text"===e.type&&(t=new u.default(e)),t&&t.content.forEach(function(e){var t=a.default.element("span",{class:"snow-tool-emotions-item",title:e.title,onclick:function(){editor.exec("insertHTML",e.html),o.layer.hide()}},{},e.view);n.push(t)})});var t=a.default.element("div",{},{width:"10em",display:"flex","flex-wrap":"wrap"},n);this.layer=new r.default(t,e)}},{key:"onStatusChange",value:function(){this.editor.range?(this._active=!0,this.editor.$(this.node).removeClass("disable")):(this._active=!1,this.editor.$(this.node).addClass("disable"))}},{key:"onClick",value:function(e){this.layer.show()}},{key:"name",get:function(){return"emotion"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=c},{"../../../dom/DomElement":3,"../../../poplayer/PopLayer":24,"../Component":6,"./emotion/Text":19}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html=n,this.view=o,this.title=t}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("./Object"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=new Array;e.content.forEach(function(e){t.push(new a.default(e,e,e))}),this._content=t}return i(n,[{key:"content",get:function(){return this._content}}]),n}();n.default=u},{"./Object":18}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return o.default.upload&&o.default.upload.uploader?(0,r.default)(e,t):(0,i.default)(e,t)};var o=a(e("../../../config")),i=a(e("./uploadToLocal")),r=a(e("./uploadToServer"));function a(e){return e&&e.__esModule?e:{default:e}}},{"../../../config":23,"./uploadToLocal":21,"./uploadToServer":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,i){return new Promise(function(n,e){var o=new FileReader;o.readAsDataURL(i),o.addEventListener("load",function(){var e={local:!0,name:i.name,link:o.result},t=r.default.upload&&r.default.upload.adapter&&r.default.upload.adapter.local&&r.default.upload.adapter.local.resovle;t?n(r.default.upload.adapter.local.resovle(e)):resovle(e)})})};var o,i=e("../../../config"),r=(o=i)&&o.__esModule?o:{default:o}},{"../../../config":23}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,e){return new Promise(function(e,t){r.default.upload&&r.default.upload.adapter&&r.default.upload.adapter.server;var n=r.default.upload&&r.default.upload.uploader;n||o.alert("未定义文件上传函数")})};var o,i=e("../../../config"),r=(o=i)&&o.__esModule?o:{default:o}},{"../../../config":23}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={height:"10rem",editable:!0,toolbar:["bold","italic","underline","align-left","align-center","align-right","emotion","attachment","undo","redo"],emotions:[{name:"Emoji",type:"text",content:"😀 😃 😄 😁 😆 😅 😂 😊 😇 🙂 🙃 😉 😓 😪 😴 🙄 🤔 😬 🤐 😭".split(/\s/)}],upload:{adapter:{local:{resovle:function(e){return e},reject:function(e){return e}},server:{resovle:function(e){return e},reject:function(e){return e}}},uploader:null,config:null}};n.default=o},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),o=u(e("../config")),a=u(e("../util/getSize")),s=u(e("../dom/DomElement")),f=u(e("../util/getPlatform")),r=(u(e("../util/isChildOf")),u(e("../util/onMouseHover")));function u(e){return e&&e.__esModule?e:{default:e}}var l=o.default.popLayerLevel||9e3,d=s.default.element,h="snow-layer-shade",p="parentSide",y="windowPop",m="windowSide",v="fadeIn",c="fadeOut",g=0;function w(){return document.getElementsByTagName("body")[0]}var b={outerBottom:function(e,t,n){var o={left:t.left+"px",top:t.top+t.height+"px"},i={left:"0px",top:e.height>=n.height?.8*n.height+"px":null,bottom:"0px",overflow:"auto",maxHeight:"80%",maxWidth:"100%",width:"100%"},r={left:e.width>=n.width?"0px":n.width/2-e.width/2+"px",top:e.height>=n.height?n.height+"px":n.height/2-e.height/2+"px",overflow:"auto",maxHeight:"100%",maxWidth:"100%"};(function(u,n,l,c){var e=this.showElement,t=(0,a.default)(this.$parent),o=(0,a.default)(e),i=(0,a.default)(null);t.left+o.width>i.width?function(e){var t=this.config.shade||!0,n=this.config.shadeClickHide||!0,o=this.config.pop||"pc"===(0,f.default)(),i=this,r=this.animationTime;if(t){var a=window.getComputedStyle(e);this.showShade=d("div",{id:h,onclick:function(){n&&(i.hide(),(0,s.default)(i.showShade).css({display:"none"}))}},{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex-10,animation:v+" ease "+r+"s forwards",backgroundColor:"rgba(0,0,0,0.4)"}),w().appendChild(this.showShade)}this.showState=o?((0,s.default)(e).css(c).css({animation:v+" ease "+r+"s forwards"}),y):((0,s.default)(e).css(l).css({animation:O(this.direction,u,"In")+" ease "+r+"s forwards"}),m)}.call(this,e,i,o):function(e){var t=this.animationTime;this.showState=p,this.showShade=null,(0,s.default)(e).css(n).css({animation:O(this.direction,u,"In")+" ease "+t+"s forwards"})}.call(this,e,t)}).call(this,"Bottom",o,i,r)}},_={outerBottom:function(){(function(e){var t=this,n=this.animationTime,o=1e3*n,i=this.showElement;null!==i&&(this.showState===m?(0,s.default)(i).css({animation:O(this.direction,e,"Out")+" ease "+n+"s forwards"}):this.showState===p?(0,s.default)(i).css({animation:O(this.direction,e,"Out")+" ease "+n+"s forwards"}):this.showState===y&&(0,s.default)(i).css({animation:c+" ease "+n+"s forwards"}),this.showShade&&(0,s.default)(this.showShade).css({animation:c+" ease "+n+"s forwards"}),setTimeout(function(){t.clear()},o))}).call(this,"Bottom")}};function O(e,t,n){return"slide"+(e||t)+n}var C=function(){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.$parent=t||window,this.$element=e,this.config=n||{shade:!0},this.id=g++,this.direction=this.config.direction,this.position="outerBottom",this.showElement=null,this.showShade=null,this.showed=!1}return i(o,[{key:"show",value:function(){var e=this;this.clear();var t=d("div",{id:"pop-layer-"+this.id},{display:"block",position:"fixed",zIndex:l},this.$element);w().appendChild(t),this.showElement=t;var n=(0,a.default)(this.$parent),o=(0,a.default)(this.$element),i=(0,a.default)(null);b[this.position].call(this,o,n,i),(0,s.default)(this.showElement).css({display:"block"}),this.showed=!0,this.clickOutListener&&((0,s.default)(window).off("click",this.clickOutListener),this.clickOutListener=null),(0,r.default)(this.showElement,null,function(){e.clickOutListener||(e.clickOutListener=function(){e.showed&&e.hide()},(0,s.default)(window).on("click",e.clickOutListener))}),this.showShade&&(0,s.default)(this.showShade).css({display:"block"})}},{key:"clear",value:function(){this.showed=!1;var e=w();this.showElement&&(e.removeChild(this.showElement),this.showElement=null),this.showShade&&(e.removeChild(this.showShade),this.showShade=null)}},{key:"hide",value:function(){_[this.position].call(this),this.showed=!1}},{key:"content",set:function(e){this.$element=e},get:function(){return this.$element}},{key:"animationTime",get:function(){return this.config.animationTime||.3}}]),o}();n.default=C},{"../config":2,"../dom/DomElement":3,"../util/getPlatform":29,"../util/getSize":30,"../util/isChildOf":33,"../util/onMouseHover":34}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("../dom/DomElement")),o=i(e("../config"));function i(e){return e&&e.__esModule?e:{default:e}}var a="Toast-Parent",u="Toast-Show",l=o.default.toastLayerLevel||1e4,c=function e(t,n,o){return new e.create(t,n,o)};c.Queue=new Array,c.create=function(e,t,n){(c.Parent=document.getElementById(a))||(c.Parent=r.default.element("div",{id:a},{pointerEvents:"none"}),document.body.appendChild(c.Parent)),c.Queue.push({message:e,timeout:t,style:n?"toast-"+n:"toast"}),c.show()},c.show=function(){if(!document.getElementById(u)){var e=c.Queue.shift(),t=r.default.element("div",{id:u,class:e.style});t.innerHTML=e.message,c.Parent.appendChild(t);var n=(c.Parent.scrollWidth||window.innerWidth)/2-t.scrollWidth/2,o=window.innerHeight-2*t.scrollHeight;t.style.marginLeft=n+"px",t.style.top=o+"px";var i=e.timeout||2e3;(0,r.default)(t).css({position:"fixed",opacity:1,zIndex:l,pointerEvents:"none",transition:"opacity 0.1s ease-in"}),setTimeout(function(){(0,r.default)(t).css({transition:"opacity 0.3s ease-out",opacity:0}),setTimeout(function(){c.Parent.removeChild(t),c.Queue.length&&c.show()},300)},i)}},n.default=c},{"../config":2,"../dom/DomElement":3}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e=e.trim(),e=void 0===document.documentElement.style[e]?i+e:e};var o,i=(o=window.getComputedStyle(document.documentElement,""),"-"+(Array.prototype.slice.call(o).join("").match(/-(moz|webkit|ms|)-/)||""===o.OLink&&["","o"])[1]+"-")},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.clipboardData&&e.clipboardData.files?e.clipboardData.files:null}},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=navigator.userAgent;return e.match(/(Mobile|Android|Linux|iPhone|iPad)/i)?e.match(/(Android|Linux)/i)?"android":"ios":"pc"}},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){{if(e instanceof Element)return e.getBoundingClientRect();var t=(0,r.default)(),n=t.width,o=t.height,i={width:n,height:o,left:0,top:0};return i}};var o,i=e("./getWindowSize"),r=(o=i)&&o.__esModule?o:{default:o}},{"./getWindowSize":31}],31:[function(e,t,n){"use strict";function o(e,t,n){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e])}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=window.document.body,t=window.document.documentElement;return{height:o("Height",e,t),width:o("Width",e,t)}}},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e instanceof Array}},{}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(;e&&e!=t;)e=e.parentNode;return e===t}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,a,u,l){var l=10|l,c=(new Date).getTime();window.addEventListener("mousemove",function(e){e.hoverTarget=r;var t=(new Date).getTime();if(l<=t-c){var n=(0,s.default)(r),o=e.pageX||e.clientX||e.x,i=e.pageY||e.clientY||e.y;(0,f.default)({x:o,y:i},n)?(e.hoverAction="hover",a&&a(e)):(e.hoverAction="outer",u&&u(e)),c=t}})};var s=o(e("./getSize")),f=o(e("./pointInBox"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./getSize":30,"./pointInBox":35}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=t.top+t.height,o=t.left+t.width;if(e.y>=t.top&&e.y<=n&&e.x>=t.left&&e.x<=o)return!0;return!1}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.replace(i,function(e,t){return 1===n.length&&n[0]instanceof Object?n[0][t]||e:n[t]||e})};var i=null;try{i=new RegExp("(?<!\\$)\\$(\\d+|\\w+?\\b)","g")}catch(e){i=new RegExp("\\$(\\d+|\\w+?\\b)","g")}},{}]},{},[1]);
//# sourceMappingURL=snow-editor.min.js.map