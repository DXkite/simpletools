/*! simpletools by DXkite 2018-08-26 */
!function i(c,a,u){function s(t,e){if(!a[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};c[t][0].call(o.exports,function(e){return s(c[t][1][e]||e)},o,o.exports,i,c,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){"use strict";var r=e("./template/index");window.dxtpl=new r.Template,window.Template=r.Template,window.renderTpl=r.renderTpl},{"./template/index":2}],2:[function(e,t,n){"use strict";var s={cache:!0,tagstart:"{",tagend:"}",compress:!0,strict:!0},o="^\\s*((?:/)?(?:"+"if,else,each,include,while,for".split(",").join("|")+"))(.*)",l="".trim?["$_tpl_=''","$_tpl_+=",";","$_tpl_"]:["$_tpl_=[]","$_tpl_.push(",");","$_tpl_.join('')"],r={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};function i(e,t){try{new Function(e)}catch(e){return"throw "+e.name+"("+a(e.message)+");{"}return t}function c(e,t){var n="";return e.match(/(?!^)\n/)?h(e.split("\n"),function(e){e&&(t&&(e=e.replace(/\s+/g," ").replace(/<!--.*?-->/g,"")),e&&(n+=l[1]+a(e)+l[2],n+="\n"))}):e&&(n+=l[1]+a(e)+l[2]),n}var p=function(e){return new String(e)},f=function(e){return p(e).replace(/&(?![\w#]+;)|[<>"']/g,function(e){return r[e]})},h=function(e,t){if(r=e,"[object Array]"===Object.prototype.toString.call(r))d(e,t);else for(var n in e)t.call(e[n],e[n],n);var r},d=function(e,t){for(var n=0;n<e.length;++n)t.call(e[n],e[n],n)},v=function(e){for(var t={},n=0;n<arguments.length;n++)for(var r in arguments[n])t[r]=arguments[n][r];return t},m=function(e,t){return new y(e).render(t)};function a(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function g(e,t,n,r){e=e||"anonymous";var o="DxTPL Error:";if(console.group(o),t){var i=t.replace(/^\n/,"").split("\n"),c=0<n-5?n-5:1,a=n+5>i.length?i.length:n+5;console.error(r);for(var u=c;u<a;u++)u==n?console.log(u+"|%c"+i[n-1]+"\t\t%c->\t\t%c"+r.name+":"+r.message,"color:red;","color:green;","color:red;"):console.log(u+"|"+i[u-1])}else console.log(t),console.log("%c"+o+r.message+"\t\t@"+e+":"+n,"color:red;");console.groupEnd(o)}function _(e,n){var r="";return e=e.replace(/^\n/,""),h(e.split(n.tagstart),function(e){var t=e.split(n.tagend);1===t.length?r+=c(t[0],n.compress):(r+=function(e){if(!(r=e.match(new RegExp(o))))return(r=e.match(/^!.*$/))?l[1]+"$_unit._echo("+r[1]+")"+l[2]:l[1]+"$_unit._escape("+e+")"+l[2];var t=r[1],n=r[2];switch(t){case"include":return 1===(n=n.trim().split(" ")).length&&n.push("$_unit.value"),n=n.join(","),l[1]+"$_unit._include("+n+")"+l[2];case"if":return i("if("+n+"){}","if ("+n+") {");case"else":return(r=n.match(/^\s*if\s+(.*)/))?"} else if ("+r[1]+"){":"}else{";case"/if":case"/while":case"/for":return"}";case"while":return i("while("+n+"){}","while ("+n+") {");case"for":return i("for("+n+"){}","for ("+n+") {");case"each":var r;return(r=n.match(/\s*(.+?)\s+(?:(?:as(?:\s+(\w+)))?(?:\s*:\s*(\w+))?)?/))?"$_unit._each("+r[1]+",function("+(r[2]?r[3]?r[3]+","+r[2]:r[2]:"value,index")+"){":'throw SyntaxError("Null Each Value");$_unit._each(null,function(){';case"/each":return"});"}}(t[0]),r+=c(t[1]))}),r}function w(t,n,e,r,o){var i,c=function(e,t,n){var r=void 0===n||n,o=[];for(var i in o.push("var $_unit=this,"+l[0]),t)o.push(i+"=this.value."+i);var c="";return r&&(c='"use strict";'),c+=o.join(","),c+=";",c+=e+"return new String("+l[3]+");"}(e,r,o),a={_each:h,_echo:p,_escape:f,_include:m,value:r};try{i=new Function(c).call(a)}catch(e){if(u=new String(e.stack).match(/<anonymous>:(\d+):\d+/)){g(t,n,u[1]-1,e)}else{var u;t=t||"anonymous";(u=new String(e.stack).match(/Function code:(\d+):\d+/))?console.error("DxTPL:Compile Error@"+t+" Line "+u[1]):console.error("DxTPL:Compile Error@"+t)}}return i}function u(e,t){var n=e||t.id,r=!1;if("string"!=typeof n)throw Error("Unsupport Template ID");var o=document.getElementById(n);return o?t.source=o.innerHTML:(t.source=n,t.id="anonymous",r=!0),t.code||(t.cache&&!r?t.code=function(e,t){var n=document.getElementById("template_caches");n||((n=document.createElement("div")).id="template_caches",n.style.display="none",document.body.appendChild(n));var r="template_cache_"+e,o=document.getElementById("template_cache_"+e);return o||((o=document.createElement("div")).id=r,o.innerText=_(document.getElementById(e).innerHTML,t||s),n.appendChild(o)),o.innerText}(n,t):t.code=_(t.source,t)),t}var y=function(e,t){this.version="1.0.43";var n=s;"string"==typeof e?(n=v(n,t)).id=e:n=v(n,e),this.config(n)};y.prototype.config=function(e){for(var t in e)this[t]=e[t];return this},y.prototype.assign=function(e,t){return this.value[e]=v(this.value[e],t),this},y.prototype.value=function(e){return this.value=v(this.value,e),this},y.prototype.compile=function(e){var t=v(this,u(e,this));return new y(t)},y.prototype.render=function(e){if(!this.source||!this.code){var t=u(this.id,this);this.config(t)}return w(this.id,this.source,this.code,e,this.strict)},t.exports={Template:y,renderTpl:function(a,u){var e=document.querySelectorAll(a);d(e,function(e,t){var n,r=e.innerHTML,o=s;if(e.dataset.init)try{n=new Function("return "+e.dataset.init+";")()}catch(e){g(a+"["+t+"]",null,0,new Error("Unsupport json"))}if(e.dataset.config)try{var i=new Function("return "+e.dataset.config+";")();o=v(o,i)}catch(e){g(a+"["+t+"]",null,0,new Error("Unsupport json"))}n=v(n,u);var c=_(r,o);e.innerHTML=w(a,r,c,n,o.strict)})}}},{}]},{},[1]);
//# sourceMappingURL=simpletools.min.js.map