/*! snow-editor by dxkite 2018-10-16 */
!function r(a,u,l){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){return s(a[t][1][e]||e)},i,i.exports,r,a,u,l)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){"use strict";e("./snow/tab/index"),e("./snow/upload/index");var o=v(e("./snow/editor/config")),i=v(e("./snow/editor/SnowEditor")),r=v(e("./snow/editor/component/style/Bold")),a=v(e("./snow/editor/component/style/Italic")),u=v(e("./snow/editor/component/style/Underline")),l=v(e("./snow/editor/component/command/Redo")),s=v(e("./snow/editor/component/command/Undo")),c=v(e("./snow/editor/component/layout/Right")),f=v(e("./snow/editor/component/layout/Left")),d=v(e("./snow/editor/component/layout/Center")),h=v(e("./snow/editor/component/tool/Emotion")),p=v(e("./snow/editor/component/tool/Image")),m=v(e("./snow/editor/component/tool/Link")),y=v(e("./snow/editor/component/tool/AttachmentManager"));function v(e){return e&&e.__esModule?e:{default:e}}window.SnowEditor=i.default,i.default.applyDefaultConfig(o.default),i.default.registerComponent(r.default),i.default.registerComponent(a.default),i.default.registerComponent(u.default),i.default.registerComponent(c.default),i.default.registerComponent(d.default),i.default.registerComponent(f.default),i.default.registerComponent(s.default),i.default.registerComponent(l.default),i.default.registerComponent(h.default),i.default.registerComponent(p.default),i.default.registerComponent(m.default),i.default.registerComponent(y.default)},{"./snow/editor/SnowEditor":4,"./snow/editor/component/command/Redo":8,"./snow/editor/component/command/Undo":9,"./snow/editor/component/layout/Center":10,"./snow/editor/component/layout/Left":11,"./snow/editor/component/layout/Right":12,"./snow/editor/component/style/Bold":13,"./snow/editor/component/style/Italic":14,"./snow/editor/component/style/Underline":15,"./snow/editor/component/tool/AttachmentManager":16,"./snow/editor/component/tool/Emotion":17,"./snow/editor/component/tool/Image":18,"./snow/editor/component/tool/Link":19,"./snow/editor/config":25,"./snow/tab/index":28,"./snow/upload/index":31}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={popLayerLevel:9e3,toastLayerLevel:1e4}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=i(e("../util/isArray")),o=i(e("../util/fixCssPrefix"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function e(t,n){return new e.constructor(t,n)};function r(e,t,n,o){var i=void 0!==o&&o;"addEventListener"in window?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}s.constructor=function(e,t){if("string"==typeof e)this.elements=(t||document).querySelectorAll(e);else{if(e instanceof s)return e;if(e instanceof Element)this.elements=[e];else if(e instanceof Array)this.elements=e;else{if(!(e instanceof Object))return console.error("DomElement:selector is invalid value:",e),this;this.elements=[e]}}this.context=t,this.length=this.elements.length;for(var n=0;n<this.length;n++)this[n]=this.elements[n];return this},s.extend=function(e){for(var t in e)this[t]=e[t]},s.extend({element:function(e,t,n,o){var i,r,a=-1===e.indexOf("<")?document.createElement(e):(i=e,(r=document.createElement("div")).innerHTML=i,r.firstChild);if(s(a).attr(t).css(n),(0,l.default)(o))for(var u in o)a.appendChild(o[u]);else o instanceof Element?a.appendChild(o):void 0!==o&&(a.innerHTML=o);return a}}),(s.method=s.constructor.prototype).extend=s.extend,s.method.extend({attr:function(n){return this.each(function(){if(n)for(var e in n)if(n[e])if(/^on/.test(e)){var t=e.replace(/^on(.+)$/,"$1");/[A-Z]/.test(t[0])&&(t=t[0].toLowerCase()+t.substr(1)),r(this,t,n[e])}else this.setAttribute(e,n[e]);else this.removeAttribute(e)}),this},css:function(t){return this.each(function(){if(t)for(var e in t)this.style[(0,o.default)(e)]=t[e]}),this},addClass:function(t){return this.each(function(){if(t){var e=this.getAttribute("class");e?e.match(new RegExp(t))||this.setAttribute("class",e+" "+t):this.setAttribute("class",t)}}),this},removeClass:function(n){return this.each(function(){var e=this.getAttribute("class");if(e){var t=e.split(/\s+/).filter(function(e){return e!==n});0<t.length?this.setAttribute("class",t.join(" ")):this.removeAttribute("class")}}),this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],this[t],t);return this},on:function(e,t,n){var o=this;return e.split(/\s+/).forEach(function(e){o.each(function(){r(this,e,t,n)})}),this},off:function(e,a,u){var t=this;return e.split(/\s+/).forEach(function(r){t.each(function(){var e,t,n,o,i;e=this,t=r,n=a,i=void 0!==(o=u)&&o,"removeEventListener"in window?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n)})}),this},find:function(e){return s(e,this[0])},val:function(){return this[0].value}}),n.default=s},{"../util/fixCssPrefix":32,"../util/isArray":38}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=s(e("../dom/DomElement")),a=s(e("../util/printf")),u=s(e("../toast/Toast")),i=s(e("./config")),l=s(e("../util/isChildOf"));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.default,f=new Array,d=0,h=r.default.element;function p(){this.fire("stateChange"),this.components&&this.components.forEach(function(e){e.onStatusChange.call(e)})}var m={insertHTML:function(e){this.range?(this.setCurrentRange(this.range),document.execCommand("insertHTML",null,e)):(this.setCurrentRange(this.createDefaultRange()),document.execCommand("insertHTML",null,"<div>"+e+"</div>"))}};var y=function(){function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.config=Object.assign(e,c),this.$element=document.querySelector(e.target),this.listener={},this._foucs=!1,this._range=!1,this.id=d++,this.$=r.default,this.attachment=new Map,n=(t=this).$element,t.$toolbar=h("div",{class:"snow-toolbar"}),t.$content=h("div",{class:"snow-content",contenteditable:t.config.editable||!0,onfocus:function(){t._foucs=!0,p.call(t),t.fire("focus")},onclick:function(){t._foucs=!0,p.call(t),t.fire("click")},onkeyup:function(){t.fire("contentChange",t.content,t.range)},onblur:function(){t._foucs=!1,t.range=t.getCurrentRange(),p.call(t),t.fire("blur")}},{"min-height":t.config.height},n.innerHTML),(0,r.default)(n).attr({class:"snow-editor-container"}),n.innerText="",n.appendChild(t.$toolbar),n.appendChild(t.$content),function(o){if(o.components=new Map,o.config.toolbar){var i=o.config.toolbar;f.forEach(function(e){var t=new e(o);if(function(e,t){for(var n in t)if(t[n]==e)return!0;return!1}(t.name,i)){var n=h("div",{class:"snow-tool-item",name:t.name,onclick:function(e){t.onClick.call(t,e,this)}},{},t.view);t.node=n,t.init.call(t,n),o.components.set(t.name,t)}}),i.forEach(function(e){var t=o.components.get(e);o.$toolbar.appendChild(t.node)})}}(this)}return o(i,[{key:"createDefaultRange",value:function(){var e=document.createRange();return e.setStart(this.$content,this.$content.childNodes.length),e}},{key:"getCurrentRange",value:function(){var e=window.getSelection();if(0<e.rangeCount){var t=e.getRangeAt(0);if((0,l.default)(t.commonAncestorContainer,this.$element))return t}}},{key:"setCurrentRange",value:function(e){if(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}},{key:"addAttachment",value:function(e){this.attachment.set(e.name,e)}},{key:"on",value:function(e,t){var n=this.listener[e]||new Array;n.push(t),this.listener[e]=n}},{key:"off",value:function(e,t){if(this.listener[e])for(var n in this.listener[e])this.listener[e][n]===t&&this.listener[e].splice(n,2,this.listener[e][n+1])}},{key:"fire",value:function(e){for(var t=this,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.listener[e]&&this.listener[e].forEach(function(e){e.apply(t,o)})}},{key:"exec",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];(function(e,t){m[e]?m[e].apply(this,t):document.execCommand(e,null,t[0])}).call(this,e,n)}},{key:"alert",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];(0,u.default)(i._.apply(i,[e].concat(n)))}},{key:"name",get:function(){return this.config.target}},{key:"content",get:function(){return this.$content.innerHTML},set:function(e){this.$content.innerHTML=e}},{key:"selectionText",get:function(){var e=this.range;return e?e.toString():null}},{key:"selectionElement",get:function(){var e=this.range;return e?e.commonAncestorContainer:null}},{key:"selectionIsEmpty",get:function(){var e=this.range;return!(!e||!e.startContainer||e.startContainer!==e.endContainer||e.startOffset!==e.endOffset)}},{key:"range",get:function(){return this._range},set:function(e){this._range=e}},{key:"editable",set:function(e){this.$content.setAttribute("contenteditable",e)},get:function(){return"true"==this.$content.getAttribute("contenteditable")}}],[{key:"applyDefaultConfig",value:function(e){c=e}},{key:"registerComponent",value:function(e){f.push(e)}},{key:"_",value:function(e){for(var t=(c.language&&c.language.str||[])[c.language&&c.language.local||"zh-CN"]||e,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return a.default.apply(void 0,[t].concat(o))}}]),i}();n.default=y},{"../dom/DomElement":3,"../toast/Toast":29,"../util/isChildOf":39,"../util/printf":42,"./config":25}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=t,this.file=e,this.data=null}return o(n,[{key:"upload",value:function(){}},{key:"isImage",get:function(){return/^image\//.test(this.file.type)}},{key:"local",get:function(){return this.data.local||!0}},{key:"html",get:function(){var e=this.data;return this.isImage?'<img title="'+e.name+'" attachment-id="'+e.name+'" alt="'+e.name+'" src="'+e.link+'">':'<a title="'+e.name+'" attachment-id="'+e.name+'" href="'+e.link+'">'+e.name+"</a>"}}]),n}();n.default=i},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e}return o(t,[{key:"init",value:function(e){}},{key:"onClick",value:function(e){}},{key:"onStatusChange",value:function(){}},{key:"name",get:function(){return"Component"}},{key:"view",get:function(){return'<div title="Component">Component</div>'}},{key:"node",set:function(e){this.$element=e},get:function(){return this.$element}}]),t}();n.default=i},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("./Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"name",get:function(){return"RangeComponent"}}]),i(t,[{key:"onRangeAction",value:function(e){console.log(e)}},{key:"onClick",value:function(e){this.editor.range&&this.onRangeAction(this.editor.range,e)}}]),t}();n.default=u},{"./Component":6}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onClick",value:function(e){this.editor.exec("redo")}},{key:"name",get:function(){return"redo"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Component":6}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Component"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onClick",value:function(e){this.editor.exec("undo")}},{key:"name",get:function(){return"undo"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Component":6}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifycenter")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifycenter")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-center"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifyleft")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifyleft")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-left"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("justifyright")}},{key:"onStatusChange",value:function(){document.queryCommandState("justifyright")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"align-right"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("bold")}},{key:"onStatusChange",value:function(){document.queryCommandState("bold")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"bold"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("italic")}},{key:"onStatusChange",value:function(){document.queryCommandState("italic")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"italic"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../Range"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"onRangeAction",value:function(e,t){this.editor.exec("underline")}},{key:"onStatusChange",value:function(){document.queryCommandState("underline")?(this._active=!0,this.editor.$(this.node).addClass("active")):(this._active=!1,this.editor.$(this.node).removeClass("active"))}},{key:"name",get:function(){return"underline"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=u},{"../Range":7}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=p(e("../Component")),r=p(e("../../../poplayer/PopLayer")),a=p(e("../../../dom/DomElement")),u=p(e("../../../util/getDropFiles")),l=p(e("../../../util/getPasteFiles")),s=p(e("../Attahment")),c=p(e("./uploader")),f=(p(e("../../../util/getSize")),p(e("../../../editor/SnowEditor"))),d=p(e("../../../tab/Tab")),h=p(e("../../../upload/UploadButton"));function p(e){return e&&e.__esModule?e:{default:e}}var m=a.default.element;f.default._;function y(t,n){(0,c.default)(t,n.file).then(function(e){n.data=e,t.exec("insertHTML",n.html),t.addAttachment(n)})}function v(t){var n=this,e=t.attachment,o=new Array;return e.size<=0?o.push(m("div",{class:"snow-attachment-item"},null,"暂无文件")):e.forEach(function(e){o.push(function(e,t){var n=this.layer;return m("div",{title:t.name,class:"snow-attachment-item",onclick:function(){e.exec("insertHTML",t.html),n.hide()}},null,[m("i",{class:"iconfont snow-icon-"+(t.isImage?"image":"attachment")}),m("span",null,null,t.name)])}.call(n,t,e))}),o}var w=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return i.dropEnter=!1,(0,a.default)(i.$content).on("paste",function(e){i.fire("paste",e),function(e){for(var t=(0,l.default)(e),n=new Array,o=0;o<t.length;o++){var i=t[o];if(/^image\//.test(i.type)){var r=new s.default(i,i.name);n.push(r)}}return n}(e).forEach(function(e){y(i,e)})}),(0,a.default)(i.$content).on("dragenter",function(e){(e=e||window.event).preventDefault(),e.stopPropagation(),console.log(e.type),!1===i.dropEnter&&(i.dropEnter=!0,i.fire("dragenter",e))}),(0,a.default)(i.$content).on("drop",function(e){(e=e||window.event).preventDefault(),e.stopPropagation(),console.log(e.type),i.dropEnter=!1,function(e){for(var t=(0,u.default)(e),n=new Array,o=0;o<t.length;o++){var i=t[o],r=new s.default(i,i.name);n.push(r)}return n}(e).forEach(function(e){y(i,e)})}),(0,a.default)(i.$content).on("dragover",function(e){(e=e||window.event).preventDefault(),e.stopPropagation(),!(e.dataTransfer.dropEffect="copy")===i.dropEnter&&(i.dropEnter=!0,i.fire("dragenter",e))}),(0,a.default)(i.$content).on("dragleave",function(e){(e=e||window.event).preventDefault(),e.stopPropagation(),0===e.screenX&&0===e.screenY&&(i.dropEnter=!1,i.fire("dragleave",e))}),r.upload=new h.default({small:!0,upload:function(n){for(var e=function(){var e=n[o],t=new s.default(e,e.name);(0,c.default)(i,t.file).then(function(e){t.data=e,i.addAttachment(t)}),r.layer.hide()},o=0;o<n.length;o++)e()}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"init",value:function(e){this.tab=new d.default({target:{btns:["文件列表","上传文件"],views:[v.call(this,this.editor),this.upload.target]},current:0,small:!0});var t=a.default.element("div",{class:"snow-attachment-menu"},null,this.tab.target);this.layer=new r.default(t,e)}},{key:"onStatusChange",value:function(){}},{key:"onClick",value:function(e){this.tab=new d.default({target:{btns:["文件列表","上传文件"],views:[v.call(this,this.editor),this.upload.target]},current:0,small:!0}),this.layer.content=a.default.element("div",{class:"snow-attachment-menu"},null,this.tab.target),this.layer.show()}},{key:"name",get:function(){return"attachment"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=w},{"../../../dom/DomElement":3,"../../../editor/SnowEditor":4,"../../../poplayer/PopLayer":26,"../../../tab/Tab":27,"../../../upload/UploadButton":30,"../../../util/getDropFiles":33,"../../../util/getPasteFiles":34,"../../../util/getSize":36,"../Attahment":5,"../Component":6,"./uploader":22}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=r(e("../Component")),u=r(e("../../../poplayer/PopLayer")),l=r(e("../../../dom/DomElement")),s=r(e("./emotion/Text")),c=r(e("../../../tab/Tab"));function r(e){return e&&e.__esModule?e:{default:e}}var f=l.default.element,a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"init",value:function(e){var i=new Array,r=new Array,a=this;this.editor.config.emotions.forEach(function(e){var t=null,n=new Array;"text"===e.type&&(t=new s.default(e)),t&&t.content.forEach(function(e){var t=l.default.element("span",{class:"snow-tool-emotions-item",onclick:function(){editor.exec("insertHTML",e.html),a.layer.hide()}},{},e.view);n.push(t)});var o=f("div",{class:"snow-emotions-tab-view"},{},n);i.push(e.name),r.push(o)}),this.tab=new c.default({target:{btns:i,views:r},current:0,small:!0}),this.content=f("div",{class:"snow-emotions-menu"},{},this.tab.target),this.layer=new u.default(this.content,e)}},{key:"onStatusChange",value:function(){}},{key:"onClick",value:function(e){this.layer.show()}},{key:"name",get:function(){return"emotion"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=a},{"../../../dom/DomElement":3,"../../../poplayer/PopLayer":26,"../../../tab/Tab":27,"../Component":6,"./emotion/Text":21}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=f(e("../Component")),r=f(e("../../../poplayer/PopLayer")),a=f(e("../../../dom/DomElement")),u=f(e("../../../tab/Tab")),l=f(e("../../../upload/UploadButton")),s=f(e("../Attahment")),c=f(e("./uploader"));function f(e){return e&&e.__esModule?e:{default:e}}var d=a.default.element,h=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));r.upload=new l.default({small:!0,accept:"image/*",upload:function(n){for(var e=function(){var e=n[o],t=new s.default(e,e.name);(0,c.default)(i,t.file).then(function(e){t.data=e,i.addAttachment(t),t.isImage&&i.exec("insertHTML",t.html)}),r.layer.hide()},o=0;o<n.length;o++)e()}});var n=d("input",{class:"snow-input-text snow-image-input",placeholder:"请输入图片地址",type:"text"}),o=d("input",{class:"snow-input-text snow-image-input",placeholder:"图片说明",type:"text"});return r.input=d("div",{class:"snow-image-inputs"},{},[o,n,d("div",{class:"snow-image-button"},null,d("div",{class:"snow-btn snow-btn-sm",onclick:function(){var e=(0,a.default)(n).val(),t=(0,a.default)(o).val()||e;e&&i.exec("insertHTML",'<img title="'+t+'"  alt="'+t+'" src="'+e+'"/>'),r.layer.hide()}},null,"插入"))]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"init",value:function(e){this.tab=new u.default({target:{btns:["插入图片","网络图片"],views:[this.upload.target,this.input]},current:0,small:!0}),this.content=d("div",{class:"snow-image-menu"},{},this.tab.target),this.layer=new r.default(this.content,e)}},{key:"onStatusChange",value:function(){}},{key:"onClick",value:function(e){this.layer.show()}},{key:"name",get:function(){return"image"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=h},{"../../../dom/DomElement":3,"../../../poplayer/PopLayer":26,"../../../tab/Tab":27,"../../../upload/UploadButton":30,"../Attahment":5,"../Component":6,"./uploader":22}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=u(e("../Component")),r=u(e("../../../poplayer/PopLayer")),a=u(e("../../../dom/DomElement"));function u(e){return e&&e.__esModule?e:{default:e}}var l=a.default.element,s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=l("input",{class:"snow-input-text snow-link-input",placeholder:"链接地址",type:"text"}),r=l("input",{class:"snow-input-text snow-link-input",placeholder:"连接说明",type:"text"});return o.input=l("div",{class:"snow-link-inputs"},{},[r,i,l("div",{class:"snow-link-button"},null,l("div",{class:"snow-btn snow-btn-sm",onclick:function(){var e=(0,a.default)(i).val(),t=(0,a.default)(r).val()||e;if(e){var n='<a title="'+t+'" href="'+e+'">'+t+"</a>";o.editor.exec("insertHTML",n)}o.layer.hide()}},null,"插入"))]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"init",value:function(e){this.content=l("div",{class:"snow-link-menu"},{},this.input),this.layer=new r.default(this.content,e)}},{key:"onStatusChange",value:function(){}},{key:"onClick",value:function(e){this.layer.show()}},{key:"name",get:function(){return"link"}},{key:"view",get:function(){return'<i class="iconfont snow-icon-'+this.name+'"></i>'}}]),t}();n.default=s},{"../../../dom/DomElement":3,"../../../poplayer/PopLayer":26,"../Component":6}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html=n,this.view=o,this.title=t}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("./Object"),a=(o=r)&&o.__esModule?o:{default:o};var u=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=new Array;e.content.forEach(function(e){t.push(new a.default(e,e,e))}),this._content=t}return i(n,[{key:"content",get:function(){return this._content}}]),n}();n.default=u},{"./Object":20}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return o.default.upload&&o.default.upload.uploader?(0,r.default)(e,t):(0,i.default)(e,t)};var o=a(e("../../../config")),i=a(e("./uploadToLocal")),r=a(e("./uploadToServer"));function a(e){return e&&e.__esModule?e:{default:e}}},{"../../../config":25,"./uploadToLocal":23,"./uploadToServer":24}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,i){return new Promise(function(n,e){var o=new FileReader;o.readAsDataURL(i),o.addEventListener("load",function(){var e={local:!0,name:i.name,link:o.result},t=r.default.upload&&r.default.upload.adapter&&r.default.upload.adapter.local&&r.default.upload.adapter.local.resovle;t?n(r.default.upload.adapter.local.resovle(e)):resovle(e)})})};var o,i=e("../../../config"),r=(o=i)&&o.__esModule?o:{default:o}},{"../../../config":25}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,e){return new Promise(function(e,t){r.default.upload&&r.default.upload.adapter&&r.default.upload.adapter.server;var n=r.default.upload&&r.default.upload.uploader;n||o.alert("未定义文件上传函数")})};var o,i=e("../../../config"),r=(o=i)&&o.__esModule?o:{default:o}},{"../../../config":25}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={height:"10rem",editable:!0,toolbar:["bold","italic","underline","align-left","align-center","align-right","emotion","image","link","attachment","undo","redo"],emotions:[{name:"Emoji",type:"text",content:"😀 😃 😄 😁 😆 😅 😂 😊 😇 🙂 🙃 😉 😓 😪 😴 🙄 🤔 😬 🤐 😭".split(/\s/)}],upload:{adapter:{local:{resovle:function(e){return e},reject:function(e){return e}},server:{resovle:function(e){return e},reject:function(e){return e}}},uploader:null,config:null}};n.default=o},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),o=r(e("../config")),c=r(e("../util/getSize")),f=r(e("../dom/DomElement")),d=r(e("../util/getPlatform")),a=r(e("../util/pointInBox")),u=r(e("../util/onMouseHover")),h=r(e("../util/timeLimitCallback"));function r(e){return e&&e.__esModule?e:{default:e}}var l=o.default.popLayerLevel||9e3,p=f.default.element,m="snow-layer-shade",y="parentSide",v="windowPop",w="windowSide",g="fadeIn",s="fadeOut",b=0;function _(){return document.getElementsByTagName("body")[0]}var O={outerBottom:function(e,t,n){var o=this,i={left:t.left+"px",top:t.top+t.height+"px"},r={left:"0px",top:e.height>=n.height?.8*n.height+"px":null,bottom:"0px",overflow:"auto",maxHeight:"80%",maxWidth:"100%",width:"100%"},a={left:e.width>=n.width?"0px":n.width/2-e.width/2+"px",top:e.height>=n.height?n.height+"px":n.height/2-e.height/2+"px",overflow:"auto",maxHeight:"100%",maxWidth:"100%"};(function(u,t,l,s,o){var e=this.showElement,n=(0,c.default)(this.$parent),i=(0,c.default)(e),r=(0,c.default)(null);n.left+i.width>r.width?function(e){var t=this.config.shade||!0,n=this.config.shadeClickHide||!0,o=this.config.pop||"pc"===(0,d.default)(),i=this,r=this.animationTime;if(t){var a=window.getComputedStyle(e);this.showShade=p("div",{id:m,onclick:function(){n&&(i.hide(),(0,f.default)(i.showShade).css({display:"none"}))}},{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex-10,animation:g+" ease "+r+"s forwards",backgroundColor:"rgba(0,0,0,0.4)"}),_().appendChild(this.showShade)}this.showState=o?((0,f.default)(e).css(s).css({animation:C(this.direction,u,"In")+" ease "+r+"s forwards"}),v):((0,f.default)(e).css(l).css({animation:C(this.direction,u,"In")+" ease "+r+"s forwards"}),w)}.call(this,e,r,i):function(n){var e=this.animationTime;this.showState=y,this.showShade=null,(0,f.default)(n).css(t).css({animation:C(this.direction,u,"In")+" ease "+e+"s forwards"}),(0,f.default)(window).on("resize scroll",(0,h.default)(function(e){var t=o();(0,f.default)(n).css(t)}).run)}.call(this,e,n)}).call(this,"Bottom",i,r,a,function(){var e=(0,c.default)(o.$parent);return{left:e.left+"px",top:e.top+e.height+"px"}})}},k={outerBottom:function(){(function(e){var t=this,n=this.animationTime,o=1e3*n,i=this.showElement;null!==i&&(this.showState===w?(0,f.default)(i).css({animation:C(this.direction,e,"Out")+" ease "+n+"s forwards"}):this.showState===y?(0,f.default)(i).css({animation:C(this.direction,e,"Out")+" ease "+n+"s forwards"}):this.showState===v&&(0,f.default)(i).css({animation:C(this.direction,e,"Out")+" ease "+n+"s forwards"}),this.showShade&&(0,f.default)(this.showShade).css({animation:s+" ease "+n+"s forwards"}),setTimeout(function(){t.clear()},o))}).call(this,"Bottom")}};function C(e,t,n){return"slide"+(e||t)+n}var j=function(){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.$parent=t||window,this.$element=e,this.config=n||{shade:!0},this.id=b++,this.direction=this.config.direction,this.position="outerBottom",this.showElement=null,this.showShade=null,this.showed=!1,this.clickOutListener=null}return i(o,[{key:"show",value:function(){var r=this;this.clear();var e=p("div",{id:"pop-layer-"+this.id},{display:"block",position:"fixed",zIndex:l},this.$element);_().appendChild(e),this.showElement=e;var t=(0,c.default)(this.$parent),n=(0,c.default)(this.$element),o=(0,c.default)(null);O[this.position].call(this,n,t,o),(0,f.default)(this.showElement).css({display:"block"}),this.showed=!0,this.clickOutListener&&((0,f.default)(window).off("click",this.clickOutListener),this.clickOutListener=null),(0,u.default)(this.showElement,null,function(){null==r.clickOutListener&&(r.clickOutListener=function(e){var t=e.pageX||e.clientX||e.x,n=e.pageY||e.clientY||e.y,o=(0,c.default)(r.showElement),i={x:t,y:n};e.isTrusted&&!(0,a.default)(i,o)&&r.showed&&r.hide()},(0,f.default)(window).on("click",r.clickOutListener))}),this.showShade&&(0,f.default)(this.showShade).css({display:"block"})}},{key:"clear",value:function(){this.showed=!1;var e=_();this.showElement&&(e.removeChild(this.showElement),this.showElement=null),this.showShade&&(e.removeChild(this.showShade),this.showShade=null)}},{key:"hide",value:function(){k[this.position].call(this),this.showed=!1}},{key:"content",set:function(e){this.$element=e},get:function(){return this.$element}},{key:"animationTime",get:function(){return this.config.animationTime||.3}}]),o}();n.default=j},{"../config":2,"../dom/DomElement":3,"../util/getPlatform":35,"../util/getSize":36,"../util/onMouseHover":40,"../util/pointInBox":41,"../util/timeLimitCallback":43}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../dom/DomElement"),s=(o=i)&&o.__esModule?o:{default:o};var l=s.default.element,r={target:"#snow-tab",selector:{title:".snow-tab-title",titleItem:".snow-tab-title > li",content:".snow-tab-content",contentItem:".snow-tab-item"},class:{title:"snow-tab-title",titleSmall:"snow-tab-sm",titleItem:null,content:"snow-tab-content",contentItem:"snow-tab-item"},classOnShow:{title:"snow-tab-current",content:"snow-tab-show"}};n.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=Object.assign(r,t),t.target instanceof Object?function(){var n=this.config,e=n.target.btns,t=n.target.views,o=new Array,i=new Array,r=n.small||!1;e.forEach(function(e){e instanceof String&&(e=document.createTextNode(e));var t=l("li",{class:n.class.titleItem},{},e);o.push(t)}),t.forEach(function(e){e instanceof String&&(e=document.createTextNode(e));var t=l("div",{class:n.class.contentItem},{},e);i.push(t)});var a=l("ul",{class:r?n.class.title+" "+n.class.titleSmall:n.class.title},{},o),u=l("div",{class:n.class.content},{},i);this.target=l("div",{},{},[a,u]),this.$btns=(0,s.default)(o),this.$views=(0,s.default)(i)}.call(this):function(){var e=this.config.target;this.target=(0,s.default)(e)[0],this.$btns=(0,s.default)(this.target).find(this.config.selector.titleItem),this.$views=(0,s.default)(this.target).find(this.config.selector.contentItem)}.call(this),function(){var o=this,i=this.$btns.elements,r=this.$views.elements,a=this.onshow,u=this.onhidden,l=this.config;0<=l.current&&(this.current=l.current,(0,s.default)(r[this.current]).addClass(l.classOnShow.content),(0,s.default)(i[this.current]).addClass(l.classOnShow.title)),i.forEach(function(t,n){(0,s.default)(t).on("click",function(){var e=o.current||0;(0,s.default)(r[e]).removeClass(l.classOnShow.content),(0,s.default)(r[n]).addClass(l.classOnShow.content),(0,s.default)(t).addClass(l.classOnShow.title),(0,s.default)(i[e]).removeClass(l.classOnShow.title),o.current=n,a instanceof Function&&a.call(o,n),u instanceof Function&&u.call(o,e)})})}.call(this)}},{"../dom/DomElement":3}],28:[function(e,t,n){"use strict";var o,i=e("./Tab"),r=(o=i)&&o.__esModule?o:{default:o};window.snow=window.snow||{},window.snow.Tab=r.default},{"./Tab":27}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("../dom/DomElement")),o=i(e("../config"));function i(e){return e&&e.__esModule?e:{default:e}}var a="Toast-Parent",u="Toast-Show",l=o.default.toastLayerLevel||1e4,s=function e(t,n,o){return new e.create(t,n,o)};s.Queue=new Array,s.create=function(e,t,n){(s.Parent=document.getElementById(a))||(s.Parent=r.default.element("div",{id:a},{pointerEvents:"none"}),document.body.appendChild(s.Parent)),s.Queue.push({message:e,timeout:t,style:n?"toast-"+n:"toast"}),s.show()},s.show=function(){if(!document.getElementById(u)){var e=s.Queue.shift(),t=r.default.element("div",{id:u,class:e.style});t.innerHTML=e.message,s.Parent.appendChild(t);var n=(s.Parent.scrollWidth||window.innerWidth)/2-t.scrollWidth/2,o=window.innerHeight-2*t.scrollHeight;t.style.marginLeft=n+"px",t.style.top=o+"px";var i=e.timeout||2e3;(0,r.default)(t).css({position:"fixed",opacity:1,zIndex:l,pointerEvents:"none",transition:"opacity 0.1s ease-in"}),setTimeout(function(){(0,r.default)(t).css({transition:"opacity 0.3s ease-out",opacity:0}),setTimeout(function(){s.Parent.removeChild(t),s.Queue.length&&s.show()},300)},i)}},n.default=s},{"../config":2,"../dom/DomElement":3}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../dom/DomElement"),r=(o=i)&&o.__esModule?o:{default:o};var a=r.default.element,u={target:"#snow-upload",accept:null,selector:{title:".snow-upload-title",file:"input[type=file]"},class:{title:"snow-upload-title",titleSmall:"snow-upload-sm",file:"snow-upload-file"}};n.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={},this.config=Object.assign(this.config,u,t),t.target?(this.target=(0,r.default)(t.target)[0],function(){var e=this.config;this.file=(0,r.default)(e.selector.file,this.target)[0],this.title=(0,r.default)(e.selector.title,this.target)[0]}.call(this)):function(){var e=this.config,t=e.small||!1,n=e.accept;this.title=a("div",{class:t?e.class.title+" "+e.class.titleSmall:e.class.title},null,"上传文件"),this.file=a("input",{class:e.class.file,hidden:!0,type:"file",accept:n}),this.target=a("div",null,null,[this.file,this.title])}.call(this),function(){var e=this,t=this.title,n=this.file,o=this.config.upload;(0,r.default)(t).on("click",function(e){n.click()}),(0,r.default)(n).on("change",function(){o?o.call(e,n.files):console.error("uploader is invalid for config.upload")})}.call(this)}},{"../dom/DomElement":3}],31:[function(e,t,n){"use strict";var o,i=e("./UploadButton"),r=(o=i)&&o.__esModule?o:{default:o};window.snow=window.snow||{},window.snow.UploadButton=r.default},{"./UploadButton":30}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e=e.trim(),e=void 0===document.documentElement.style[e]?i+e:e};var o,i=(o=window.getComputedStyle(document.documentElement,""),"-"+(Array.prototype.slice.call(o).join("").match(/-(moz|webkit|ms|)-/)||""===o.OLink&&["","o"])[1]+"-")},{}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.clipboardData&&e.clipboardData.files?e.clipboardData.files:null}},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=navigator.userAgent;return e.match(/(Mobile|Android|Linux|iPhone|iPad)/i)?e.match(/(Android|Linux)/i)?"android":"ios":"pc"}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){{if(e instanceof Element)return e.getBoundingClientRect();var t=(0,r.default)(),n=t.width,o=t.height,i={width:n,height:o,left:0,top:0};return i}};var o,i=e("./getWindowsSize"),r=(o=i)&&o.__esModule?o:{default:o}},{"./getWindowsSize":37}],37:[function(e,t,n){"use strict";function o(e,t,n){var o=screen[e.toLowerCase()],i=[t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e]].filter(function(e){return e<o});return Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=window.document.body,t=window.document.documentElement;return{height:o("Height",e,t),width:o("Width",e,t)}}},{}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e instanceof Array}},{}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(;e&&e!=t;)e=e.parentNode;return e===t}},{}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,a,u,l){var l=10|l,s=(new Date).getTime();window.addEventListener("mousemove",function(e){e.hoverTarget=r;var t=(new Date).getTime();if(l<=t-s){var n=(0,c.default)(r),o=e.pageX||e.clientX||e.x,i=e.pageY||e.clientY||e.y;(0,f.default)({x:o,y:i},n)?(e.hoverAction="hover",a&&a(e)):(e.hoverAction="outer",u&&u(e)),s=t}})};var c=o(e("./getSize")),f=o(e("./pointInBox"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./getSize":36,"./pointInBox":41}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=t.top+t.height,o=t.left+t.width;if(e.y>=t.top&&e.y<=n&&e.x>=t.left&&e.x<=o)return!0;return!1}},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.replace(i,function(e,t){return 1===n.length&&n[0]instanceof Object?n[0][t]||e:n[t]||e})};var i=null;try{i=new RegExp("(?<!\\$)\\$(\\d+|\\w+?\\b)","g")}catch(e){i=new RegExp("\\$(\\d+|\\w+?\\b)","g")}},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i,r,a){var a=10|a,u=(new Date).getTime();return{run:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(new Date).getTime();a<=o-u&&(i.apply(r||i,t),u=o)}}}},{}]},{},[1]);
//# sourceMappingURL=snow-editor.min.js.map